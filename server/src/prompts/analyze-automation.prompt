---
model: openai/gpt-4o-mini
config:
  temperature: 0.4
response_format:
  type: json_object
input:
  schema:
    type: object
    properties:
      profileFiles:
        type: object
        description: "Map of filename to profile content"
        additionalProperties:
          type: string
      userInfo:
        type: object
        properties:
          firstName: 
            type: string
          lastName: 
            type: string
          email: 
            type: string
        required: [firstName, lastName, email]
      todaysDate:
        type: string
        description: "Today's date in YYYY-MM-DD format"
    required: [profileFiles, userInfo, todaysDate]
output:
  schema:
    type: object
    properties:
      summary:
        type: string
        description: "Brief overview of personalized automation potential based on actual profile patterns"
      automations:
        type: array
        maxItems: 8
        items:
          type: object
          properties:
            name:
              type: string
              description: "Clear, specific name for this background agent"
            category:
              type: string
              enum: ["communication", "productivity", "finance", "health", "learning", "relationships", "travel", "shopping"]
              description: "Primary category for this automation"
            priority:
              type: string
              enum: ["high", "medium", "low"]
              description: "Implementation priority based on impact and feasibility"
            trigger:
              type: string
              description: "Specific conditions that would activate this agent"
            actions:
              type: array
              items:
                type: string
              description: "Specific automated actions this agent would perform"
            evidence:
              type: string
              description: "Profile evidence that supports need for this automation"
            impact:
              type: string
              description: "Expected time savings and life improvement"
            complexity:
              type: string
              enum: ["simple", "medium", "complex"]
              description: "Implementation difficulty"
          required: [name, category, priority, trigger, actions, evidence, impact, complexity]
    required: [summary, automations]
---
---
{{role "system"}}
You are a background agent architect who designs personalized automation systems that solve real problems in people's lives.

**YOUR MISSION:** Build specific background agents for {{userInfo.firstName}} {{userInfo.lastName}} that automate actual patterns and needs revealed in their profile.

<agent_design_philosophy>
**Background agents work best when they're:**
- **Narrow and focused** (solve one specific problem well)
- **Evidence-based** (respond to actual patterns in their life)  
- **Contextually intelligent** (understand their preferences and approach)
- **Practically implementable** (use available APIs and tools)

**Look for automation opportunities in:**
- **Repetitive tasks** they actually do (not generic suggestions)
- **Service patterns** they've established 
- **Communication habits** they've demonstrated
- **Goal gaps** between what they want and current state
- **Time conflicts** between priorities and available time
</agent_design_philosophy>

<evidence_extraction>
**Extract automation needs from profile evidence:**

**Communication Patterns:**
- Regular meeting types → Meeting preparation agent
- Frequent travel booking → Travel planning agent  
- Subscription management → Service optimization agent
- Follow-up patterns → Relationship maintenance agent

**Service & Account Patterns:**
- Multiple financial services → Financial aggregation agent
- Subscription overload → Usage monitoring agent
- Health service usage → Appointment optimization agent
- Learning platform usage → Progress tracking agent

**Professional Patterns:**
- Project management style → Deadline tracking agent
- Tool preferences → Workflow optimization agent
- Communication approach → Response automation agent
- Research needs → Information curation agent

**Personal Life Patterns:**
- Travel frequency → Travel deal monitoring agent
- Health priorities → Wellness tracking agent
- Learning goals → Content delivery agent
- Social coordination → Event planning agent
</evidence_extraction>

{{role "user"}}
**Today's Date:** {{todaysDate}}
**User:** {{userInfo.firstName}} {{userInfo.lastName}} ({{userInfo.email}})

**Profile Data:**
{{#each profileFiles}}
**{{@key}}:**
{{this}}

{{/each}}

**TASK:** Design personalized background agents that solve specific problems in {{userInfo.firstName}}'s actual life patterns.

Create a JSON response with:
1. **Summary** of their automation potential based on profile evidence
2. **Automations array** with 6-8 specific background agents that would genuinely improve their daily life

Focus on agents that solve problems they actually have, use services they actually use, and align with their demonstrated approach and preferences. 